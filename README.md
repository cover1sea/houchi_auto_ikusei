# 概要
放置少女用育成スクリプト  
機能：  
- 設定に応じた自動育成  
    - C級 or B級
    - 育成重み指定
    - 育成回数指定
- 指定回数の育成終了後のステータス増加量の計算    

# 動作確認環境
Windows 10  
Python 3  
NoxPlayer 7  
Amazon版 放置少女アプリ

# 初期設定
1. python3をインストール(未インストールの場合)  
    参考記事  
    <https://qiita.com/New_enpitsu_15/items/ee95bde0858e9f77acf0>  

2. 各種ライブラリインストール  
    ```
    python -m pip install opencv-python  
    python -m pip install pyocr  
    ```
    (多分これだけだが、足りなさそうなら適宜インストール)

3. Tesseract-OCRをインストール(未インストールの場合)  
    <https://github.com/UB-Mannheim/tesseract/wiki>

4. nox_adbのPathを通す  
    <https://www.google.com/search?q=nox+adb>

5. main.py内の変数nox_dirの内容変更  
    "F:\\Nox\bin"の部分を"自身のNoxのインストールフォルダ\bin"に変更  
    これはやらなくても動くかも


6. Noxの解像度を変更  
    携帯電話の540p、720p、900p、1080p、1440p、2160pのどれかに変更  
    おすすめは1080pです(画像認識の精度の関係上)。    

# つかいかた
1. 育成画面を開く  
    AUTO育成はチェックを外しておく。
2. 以下の書式でコマンド実行  
    `$python main.py c|b 筋力 敏捷 知力 体力 育成回数 (IP:port)`    
    ぞれぞれのパラメータの上昇量×設定した重み の総和が正の場合に育成を確定します。  
    サンプルとして育成方法を設定したバッチファイルをいくつか入れています。  
    IP:portを指定すると、noxを複数起動している場合に任意のnoxでスクリプトを動かせます。  
    無指定の場合、最後に起動したnoxを対象にしてスクリプトが動きます。  

* IP:portの取得方法   
    noxを起動した状態で、以下のコマンドを実行。  
    `$nox_adb devices`  
    以下のような結果が得られ、この例の場合**127.0.0.1:62028**がIP:portになります。  
    ```
    List of devices attached   
    127.0.0.1:62028 device  
    ```
    noxを複数実行している場合は複数表示されますが、上から起動が新しい順に並びます。

育成ができない場合はPCスペック不足、回線問題で表示が追いつかずにエラーが出ている可能性があります。  
その場合はtap関数の最後(38行目)のtime.sleep()の数値を増やしてみたりするといいかも。  
たまにOCRの認識ミスでエラーが起きることがあります。  
パラメータ変えたりすると改善できるかもしれませんが試していないのでわかりません。

# 免責
使用は自己責任でお願いします。

# 更新履歴
2022/01/09 スクリプト高速化、ラグ等による取得エラー対応、OCR誤認識対応  
2021/10/01 720p、900p、1080p、1440p、2160pの解像度に暫定対応。1080pとかに設定するとだいぶ精度が良くなります。  
2021/09/27 数値認識処理の改善。 精度悪くなった方はv1.0をご利用ください。
